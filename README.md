# WorkTool Pro 浏览器扩展

一个功能强大的Chrome浏览器扩展，提供专业的网页工具套件，包括表格检测、复制工具、复制保护解除和请求头管理功能。

## 🚀 功能特性

### 📊 表格工具
- **智能表格检测** - 自动查找页面中的所有表格
- **表格高亮** - 点击即可高亮显示指定表格
- **选择性复制** - 支持单个表格复制和批量选择复制
- **表格预览** - 显示表格的实际内容预览
- **表格信息** - 显示表格的行列数和详细信息
- **批量操作** - 支持全选、清空选择和批量复制

### 📋 复制工具
- **解除复制限制** - 一键解除网页的复制保护
- **选择保护解除** - 允许选择被禁止选择的文本
- **右键菜单恢复** - 恢复被禁用的右键菜单
- **实时状态显示** - 显示当前复制功能的启用状态

### 🌐 请求头管理
- **自定义请求头** - 添加、编辑、删除自定义HTTP请求头
- **批量管理** - 支持启用/禁用多个请求头
- **持久化存储** - 配置自动保存，关闭弹窗后不会丢失
- **实时应用** - 点击应用后立即生效，影响后续所有请求
- **预设模板** - 提供常用的请求头模板（User-Agent、Accept等）
- **状态同步** - 与background script同步，确保请求头正确应用

### 🎨 高级UI设计
- **现代化界面** - 采用渐变背景和毛玻璃效果
- **流畅动画** - 丰富的交互动画和过渡效果
- **响应式设计** - 适配不同屏幕尺寸
- **深色主题** - 护眼的深色配色方案

## 🛠️ 技术栈

- **前端框架**: React 19 + TypeScript
- **构建工具**: Vite
- **样式设计**: Tailwind CSS
- **浏览器API**: Chrome Extension API

## 📦 开发环境

```bash
# 安装依赖
yarn install

# 启动开发服务器
yarn dev

# 构建生产版本
yarn build

# 代码检查
yarn lint
```

## 📁 项目结构

```
src/
├── components/           # 组件目录
│   ├── TableTools.tsx   # 表格工具组件
│   ├── CopyTools.tsx    # 复制工具组件
│   └── RequestHeaders.tsx # 请求头管理组件
├── hooks/               # 自定义Hook目录
│   └── useChromeAPI.ts  # Chrome API Hook
├── types/               # 类型定义目录
│   └── index.ts         # 统一类型定义
├── utils.ts             # 工具函数
├── App.tsx              # 主应用组件
├── content.ts           # 内容脚本
├── main.tsx             # 应用入口
└── index.css            # 全局样式
```

## 🏗️ 架构设计

### 组件化架构
- **TableTools组件**: 负责表格检测、高亮和复制功能
- **CopyTools组件**: 负责复制保护解除功能
- **useChromeAPI Hook**: 封装Chrome API调用逻辑
- **App组件**: 作为容器组件，管理全局状态和路由

### 模块化设计
- **功能分离**: 每个功能模块独立成组件
- **状态管理**: 组件内部管理自己的状态
- **Props传递**: 通过Props传递共享的状态和方法
- **Hook复用**: 使用自定义Hook封装通用逻辑

## 🔧 核心功能实现

### 表格检测功能
- 使用 `document.querySelectorAll("table")` 查找所有表格
- 过滤有效的表格元素（包含子元素）
- 提取表格的行列信息和预览内容
- 支持表格高亮和复制

### 选择性复制功能
- **单个表格复制**: 点击表格项的复制按钮复制单个表格
- **批量选择复制**: 使用复选框选择多个表格进行批量复制
- **全选/清空**: 一键全选或清空所有表格选择
- **预览内容**: 显示表格的实际内容预览，帮助用户识别

### 复制保护解除
- **CSS样式移除**: 移除 `user-select: none` 等禁止复制的样式
- **事件监听器处理**: 阻止禁止复制的事件监听器
- **全局样式注入**: 添加允许复制的全局CSS规则
- **状态管理**: 实时跟踪复制功能的启用状态

### 请求头管理功能
- **本地存储**: 使用localStorage持久化保存请求头配置
- **Background Script**: 通过background script处理网络请求拦截
- **declarativeNetRequest**: 使用Chrome扩展API修改HTTP请求头
- **实时同步**: content script与background script实时通信
- **批量操作**: 支持启用/禁用多个请求头
- **模板预设**: 提供常用的请求头模板供用户选择

### 高级UI设计
- **渐变背景**: 使用CSS渐变创建现代视觉效果
- **毛玻璃效果**: 使用 `backdrop-filter` 实现模糊效果
- **动画系统**: 丰富的CSS动画和过渡效果
- **响应式布局**: 适配不同屏幕尺寸

## 🎯 使用方法

### 安装扩展
1. 在Chrome中打开扩展管理页面 (chrome://extensions/)
2. 启用"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择项目的 `dist` 目录

### 使用表格工具
1. 访问包含表格的网页
2. 点击扩展图标打开面板
3. 切换到"表格工具"标签
4. 点击"查找页面表格"按钮
5. 查看表格列表和预览内容
6. 选择复制方式：
   - **单个复制**: 点击表格项的"复制"按钮
   - **批量复制**: 勾选复选框选择表格，点击"复制选中"
   - **全部复制**: 点击"复制所有"按钮
7. 点击表格项进行高亮显示

### 使用复制工具
1. 访问有复制限制的网页
2. 点击扩展图标打开面板
3. 切换到"复制工具"标签
4. 查看当前复制状态
5. 点击按钮启用/禁用复制功能
6. 现在可以自由复制页面内容

### 使用请求头管理
1. 点击扩展图标打开面板
2. 切换到"🌐 请求头"标签
3. 添加或编辑自定义请求头：
   - 在输入框中输入请求头名称和值
   - 点击"添加请求头"按钮
4. 启用需要的请求头：
   - 勾选复选框启用请求头
   - 可以编辑或删除现有请求头
5. 点击"应用选中"按钮应用请求头
6. 配置会自动保存，关闭弹窗后不会丢失
7. 点击"清除全部"可以清除所有自定义请求头

## 🔒 安全说明

- 扩展仅在用户主动点击时执行操作
- 不会收集或传输用户数据
- 所有功能都在本地执行
- 遵循Chrome扩展的安全最佳实践

## 🎨 设计特色

### 配色方案
- **主色调**: 蓝紫色渐变 (#667eea → #764ba2)
- **成功色**: 绿色渐变 (#56ab2f → #a8e6cf)
- **危险色**: 红色渐变 (#ff6b6b → #ee5a24)
- **辅助色**: 青色渐变 (#4ecdc4 → #44a08d)

### 视觉效果
- **毛玻璃效果**: 使用 `backdrop-filter: blur()`
- **阴影系统**: 多层次阴影营造深度感
- **动画过渡**: 流畅的hover和点击效果
- **渐变背景**: 现代感的渐变配色

## 📈 性能优化

- **代码分割**: 分离content script和popup
- **组件懒加载**: 按需加载功能组件
- **异步操作**: 所有API调用都是异步的
- **错误处理**: 完善的错误处理和用户反馈
- **内存管理**: 及时清理事件监听器和样式

## 🔄 更新日志

### v2.3.0 (当前版本)
- ✨ 新增请求头管理功能
- 🌐 支持自定义HTTP请求头添加、编辑、删除
- 💾 请求头配置持久化存储，关闭弹窗后不会丢失
- 🔧 通过background script和declarativeNetRequest API实现请求头修改
- 📋 提供常用请求头模板（User-Agent、Accept等）
- 🎯 支持批量启用/禁用请求头
- 🔄 实时同步content script与background script

### v2.2.0
- ✨ 新增选择性复制表格功能
- 🔧 支持单个表格复制和批量选择复制
- 📊 添加表格选择状态管理
- 🎨 优化表格列表UI，添加复选框和操作按钮
- 📋 新增全选、清空和批量复制功能
- 🔍 改进表格预览显示效果

### v2.1.0
- 🏗️ 重构为模块化架构
- 📦 分离组件和Hook
- 🔧 提高代码可维护性
- 📊 优化表格预览功能
- 🎨 改进UI布局

### v2.0.0
- ✨ 新增复制保护解除功能
- 🎨 全新的现代化UI设计
- 📱 响应式布局优化
- 🔧 代码结构重构
- 🐛 修复多个已知问题

### v1.0.0
- 📊 基础表格检测功能
- 🎯 表格高亮功能
- 📋 表格复制功能

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

---

**WorkTool Pro** - 让网页操作更简单、更高效！ 🔧✨
